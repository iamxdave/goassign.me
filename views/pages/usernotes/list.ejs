<%- include('../../partials/header') %>
    <main>
        <div class="main-divider">
            <section>
                <div class="alert">
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                    Successfully deleted usernote
                </div> 
                <h2>Usernotes</h2>
                <% if(usernotes == null || usernotes.length == 0) { %>
                    <h3>There are no usernotes</h3>
                <% } else { %>
                    <table class="table-list">
                        <thead>
                            <tr>
                                <th rowspan="2">User</th>
                                <th rowspan="2">Note title</th>
                                <th colspan="2">Permissions</th>
                                <th rowspan="2" class="display">Actions</th>
                            </tr>
                            <tr>
                                <th>Write</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% for (let usernote of usernotes) { %>
                                <tr>
                                    <td><%= usernote.user.username %></td>
                                    <td><div class="note-title"><%= usernote.note.title %></div></td>
                                    <td class="table-checkbox">
                                        <input type="checkbox" id="write" name="canWrite" value="permission" <%= (usernote.write == true)? "checked" : "" %> disabled>
                                    </td>
                                    <td class="table-checkbox">
                                        <input type="checkbox" id="delete" name="canDelete" value="permission" <%= (usernote.delete == true)? "checked" : "" %> disabled>
                                    </td>
                                    <td class="display">
                                        <ul class="list-actions">
                                            <li><a href="usernotes/details/<%= usernote._id %>" class="list-actions-button-details">Details</a></li>
                                            <li><a href="usernotes/edit/<%= usernote._id %>" class="list-actions-button-edit">Edit</a></li>
                                            <li><a href="usernotes/delete/<%= usernote._id %>" class="list-actions-button-delete">Delete</a></li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr class="display-small">
                                    <td colspan="4">
                                        <ul class="list-actions">
                                            <li><a href="usernotes/details/<%= usernote._id %>" class="list-actions-button-details">Details</a></li>
                                            <li><a href="usernotes/edit/<%= usernote._id %>" class="list-actions-button-edit">Edit</a></li>
                                            <li><a href="usernotes/delete/<%= usernote._id %>" class="list-actions-button-delete">Delete</a></li>
                                        </ul>
                                    </td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                <% } %> 
                <div class="form-buttons">
                    <a href="usernotes/add" class="button-add">Add user to the note</a>
                </div>
            </section>
        </div>
    </main>
<%- include('../../partials/footer') %>
